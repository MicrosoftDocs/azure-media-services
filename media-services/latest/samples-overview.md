---
title: Media Services v3 samples
description: This article is a listing of all of the Media Services code samples for Node.JS, Python, .NET, and Java. Create an account - The sample shows how to create a Media Services account and set the primary storage account, in addition to advanced configuration settings including Key Delivery IP allowlist, Managed Identity, storage auth, and bring your own encryption key.Create an account with a user managed identity - The sample shows how to create a Media Services account and set the primary storage account, in addition to advanced configuration settings including Key Delivery IP allowlist, user or system assigned Managed Identity, storage auth, and bring your own encryption key.List assets - Basic example of how to connect and list assets. Get container from asset - Get the container name from the asset. List the tracks in an asset - List the media tracks in an asset. Stream HLS and DASH - Basic example for uploading a local file or encoding from a source URL. Sample shows how to use storage SDK to download content, and shows how to stream to a player. Use asset filters - Use a filter to stream assets. Live stream with standard passthrough - Standard passthrough live streaming example. Live stream with standard passthrough with Event Hubs - Demonstrates how to use Event Hubs to subscribe to events on the live streaming channel. Events include encoder connections, disconnections, heartbeat, latency, discontinuity, and drift issues. Live stream with basic passthrough - Shows how to set up the basic passthrough live event if you only need to broadcast a low-cost UGC channel. Live stream with 720P standard encoding - Use live encoding in the cloud with the 720P HD adaptive bitrate encoding preset. Live stream with 720P standard encoding with Low Latency - Use live encoding in the cloud with the 720P HD adaptive bitrate encoding preset. Live stream with 1080P encoding - Use live encoding in the cloud with the 1080P HD adaptive bitrate encoding preset. Basic encoding - Basic example for uploading a local file or encoding from a source URL. Sample shows how to use storage SDK to download content, and shows how to stream to a player. Create transform, use job preset overrides (v2-to-v3 API migration) - If you need a workflow where you desire to submit custom preset jobs to a single queue, you can use this base sample that shows how to create a (mostly) empty Transform, and then you can use the preset override property on the Job to submit custom presets to the same transform. This allows you to treat the v3 AMS API a lot more like the legacy v2 API Job queue if you desire. Encode audio only with AAC- This example shows you how to encoding only the audio of a media file. Encode with CopyCodec - This sample shows how to use the built-in Copy codec preset that can take a source video file that is already encoded using H264 and AAC audio, and copy it into MP4 tracks that are ready to be streamed by the AMS service. Encode with CopyCodec and proxy - This sample shows how to use the built-in Copy codec preset that can take a source video file that is already encoded using H264 and AAC audio, and copy it into MP4 tracks that are ready to be streamed by the AMS service. Encode with a custom CopyCodec with a sprite and proxy - This sample shows how to use the built-in Copy codec preset that can take a source video file that is already encoded using H264 and AAC audio, and copy it into MP4 tracks that are ready to be streamed by the AMS service. In addition, this preset generates a fast proxy MP4 from the source video. Encoding with H264 and Event Hub/Event Grid - Shows how to use the standard encoder and receive and process Event Grid events from Media Services through an Event Hubs. First set up an Event Grid subscription that pushes events into an Event Hubs using the Azure portal or CLI to use this sample. Encode with H264 - Shows how to use the standard encoder to encode a source file into H264 format with AAC audio and PNG thumbnails. Content Aware encoding with H264 - Example of using the standard encoder with Content Aware encoding to automatically generate the best quality adaptive bitrate streaming set based on an analysis of the source files contents. Content Aware encoding constrained with H264 - Demonstrates how to control the output settings of the Content Aware encoding preset to make the outputs more deterministic to your encoding needs and costs. This will still auto generate the best quality adaptive bitrate streaming set based on an analysis of the source files contents, but constrain the output to your desired ranges. Use an overlay image - Shows how to upload an image file and overlay on top of video with output to MP4 container. Rotate a video 90 degrees - Shows how to use the rotation filter to rotate a video by 90 degrees. Encode to a transport stream - Shows how to use the standard encoder to encode a source file and output to MPEG Transport Stream format using H264 format with AAC audio and PNG thumbnail. Encode HEVC - Shows how to use the standard encoder to encode a source file into HEVC format with AAC audio and PNG thumbnails. Content aware encoding with HEVC - Example of using the standard encoder with Content Aware encoding to automatically generate the best quality HEVC (H.265) adaptive bitrate streaming set based on an analysis of the source files contents.Content aware encoding constrained with HEVC - Demonstrates how to control the output settings of the Content Aware encoding preset to make the outputs more deterministic to your encoding needs and costs. This will still auto generate the best quality adaptive bitrate streaming set based on an analysis of the source files contents, but constrain the output to your desired ranges. Encode with multi-channel audio - This example shows you how to encode using multiple audio channels. Use a thumbnail sprite - This example shows you how to use a thumbnail sprite. Stitch two assets - This example shows you how to stitch two assets together. Crop a video - This sample illustrates how to crop a video. Copy live archive to MP4 file format for export or use with Video Indexer - This sample shows you how to encode a live stream archive to MP4 for video on demand playbackThis sample demonstrates how to use the archived output from a live event and extract only the top highest bitrate video track to be packaged into an MP4 file for export to social media platforms, or for use with Video Indexer.  The key concept in this sample is the use of an input definition on the Job InputAsset to specify a VideoTrackDescriptor. The SelectVideoTrackByAttribute allows you to select a single track from the live archive by using the bitrate attribute, and filtering by the "Top" video bitrate track in the live archive. Event based Face Redactor - This is an example of an event-based approach that triggers an Azure Media Services Face Redactor job on a video as soon as it lands on an Azure Storage Account. It uses Azure Media Services, Azure Function, Event Grid, and Azure Storage for the solution. For the full description of the solution. Video Analytics - This sample illustrates how to create a video analyzer transform using the basic mode. Audio analytics - This sample illustrates how to create a audio analyzer transform using the basic mode. It also shows how you can override the preset language on a per-job basis to avoid creating a transform for every language. It also shows how to upload a media file to an input asset, submit a job with the transform and download the results for verification.
author: IngridAtMicrosoft
ms.service: media-services
ms.topic: overview
ms.date: 01/09/2023
ms.author: inhenkel
---

# Media Services v3 samples

[!INCLUDE [media services api v3 logo](./includes/v3-hr.md)]

This article contains a list of all the samples available for Media Services organized by method and SDK.

## 3rd party player samples

Try various players such as Shaka, Video.js, and THEOPlayer with the [3rd party player samples](https://github.com/Azure-Samples/media-services-3rdparty-player-samples).

## Samples by SDK

You'll find description and links to the samples you may be looking for in each of the tabs.

[!INCLUDE [warning-billing](includes/warning-billing.md)]

## [Node.JS (TypeScript)](#tab/node/)

|Sample|Description|
|---|---|
| **Account** ||
|[Create an account](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Account/create-account.ts)|The sample shows how to create a Media Services account and set the primary storage account, in addition to advanced configuration settings including Key Delivery IP allowlist, Managed Identity, storage auth, and bring your own encryption key.|
|[Create an account with user assigned managed identity](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Account/create-account_with_managed_identity.ts)|The sample shows how to create a Media Services account and set the primary storage account, in addition to advanced configuration settings including Key Delivery IP allowlist, user or system assigned Managed Identity, storage auth, and bring your own encryption key.|
| **Assets** ||
|[Hello World - list assets](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/HelloWorld-ListAssets/list-assets.ts)|Basic example of how to connect and list assets |
|[Get the storage container from an asset](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Assets/get-container-from-asset.ts)|Demonstrates how to find the Azure storage account container used to store the contents of this asset. This can be used to then edit sources, modify, or copy contents using the Azure storage SDK library |
|[List assets using filters](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Assets/list-assets-filtered.ts)| Use filters in your list assets calls to find assets by date and order them.|
|[List the streaming locators on an asset using filters](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Assets/list-assets-filtered.ts)| Use filters to list the streaming locators attached to your assets.|
|[List tracks in an asset](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Assets/list-tracks-in-asset.ts)| Use the tracks collection to list all of the track names and track types (audio, video, or text) available on an asset|
|[Add a WebVTT/IMSC1/TTML subtitle or caption to an existing asset](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Assets/add-WebVTT-tracks.ts)| Use the tracks API on an Asset to add a new WebVTT or TTML/IMSC1 text profile caption or subtitle to an existing asset|
|[Add an additional audio track to an existing asset using the tracks API](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Assets/add-audio-language-track.ts)| Use the tracks API on an Asset to add an additional audio language or descriptive audio track to an existing asset. This sample demonstrates how to upload, encode using content aware encoding, and then late bind an additional audio track for a new language to the asset.|
| **Live Streaming** ||
|[Live stream with standard passthrough](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Live/Standard_Passthrough_Live_Event/index.ts)| Standard passthrough live streaming example. |
|[Live stream with standard passthrough with Event Hubs](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Live/Standard_Passthrough_Live_Event_with_EventHub/index.ts)| Demonstrates how to use Event Hubs to subscribe to events on the live streaming channel. Events include encoder connections, disconnections, heartbeat, latency, discontinuity, and drift issues. |
|[Live stream with basic passthrough](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Live/Basic_Passthrough_Live_Event/index.ts)| Shows how to set up the basic passthrough live event if you only need to broadcast a low-cost UGC channel. |
|[Low Latency Live (LL-HLS) with 720P standard encoding](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Live//720P_Low_Latency_Encoding_Live_Event/index.ts)| Enable low latency live streaming with Apple's LL-HLS protocol and encode with the new 3-layer 720P HD adaptive bitrate encoding preset.|
|[Live stream with 720P standard encoding](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Live/720P_Encoding_Live_Event/index.ts)| Use live encoding in the cloud with the 720P HD adaptive bitrate encoding preset. |
|[Live stream with 1080P encoding](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Live/720P_Encoding_Live_Event/index.ts)| Use live encoding in the cloud with the 1080P HD adaptive bitrate encoding preset. |
|[FFmpeg command line samples for RTMP and Smooth](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Live/FFmpeg/ffmpeg_commands.md)| Example command lines for using FFmpeg locally to stream over RTMP or Smooth streaming. Demonstrates various scenarios including audio only, multi-audio, and screen recording|
| **VOD File Streaming** ||
|[Upload and stream HLS and DASH](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Streaming/StreamFilesSample/index.ts)| Basic example for uploading a local file or encoding from a source URL. Sample shows how to use storage SDK to download content, and shows how to stream to a player |
|[Upload a file and stream with Clear Key encryption](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Streaming/StreamFileWithAESClearKey/index.ts)| Basic example for uploading a local file, encoding it with Content Aware Encoding, and Streaming it using AES Clear Key encryption using Azure Media Player. Sample demonstrates how to create a basic JWT token for playback of AES encrypted content in the browser |
| **Content protection** ||
|[Upload and stream HLS and DASH with PlayReady and Widevine DRM](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Streaming/StreamFilesWithDRMSample/index.ts)| Demonstrates how to encode and stream using Widevine and PlayReady DRM |
|[Basic Playready DRM content protection and streaming](https://github.com/Azure-Samples/media-services-v3-node-tutorials/tree/main/ContentProtection/BasicPlayReady/index.ts)| Demonstrates how to encode and stream using PlayReady DRM |
|[Basic Widevine DRM content protection and streaming](https://github.com/Azure-Samples/media-services-v3-node-tutorials/tree/main/ContentProtection/BasicWidevine/index.ts)| Demonstrates how to encode and stream using Widevine DRM |
| **Encoding** ||
|[Create transform, use job preset overrides (v2-to-v3 API migration)](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/CreateTransform_Job_PresetOverride/index.ts)| If you need a workflow where you desire to submit custom preset jobs to a single queue, you can use this base sample that shows how to create a (mostly) empty Transform, and then you can use the preset override property on the Job to submit custom presets to the same transform. This allows you to treat the v3 AMS API a lot more like the legacy v2 API Job queue if you desire.|
|[Copy Audio and Video to MP4 without re-encoding](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_BuiltIn_CopyCodec/) | Uses the built in preset that rapidly copies the source video and audio into a new MP4 file that is ready to be streamed as on-demand through AMS.  This is an extremely useful preset for pre-encoded content or externally encoded content to be quickly readied for streaming in AMS. |
|[Copy Audio and Video to MP4 without re-encoding and create a low bitrate proxy](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main//VideoEncoding/Encoding_BuiltIn_CopyCodecWithProxy/) | Same as above sample, but adds an additional fast encoded proxy resolution. Very useful when creating a CMS or preview of an Asset. |
|[Copy Audio and Video to MP4 without re-encoding and create a low bitrate proxy and VTT sprite thumbnail](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main//VideoEncoding/Encoding_Custom_CopyCodec_Sprite%2BProxy/) | Same as above samples, with the addition of a VTT sprite thumbnail for use in building a web page, CMS, or custom asset management application |
|[Encode with H264](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_H264/index.ts)| Shows how to use the standard encoder to encode a source file into H264 format with AAC audio and PNG thumbnails |
|[Encode with H264 with Event Hubs/Event Grid](https://github.com/Azure-Samples/media-services-v3-node-tutorials/tree/main/VideoEncoding/Encoding_H264_with_EventHub/index.ts)| Shows how to use the standard encoder and receive and process Event Grid events from Media Services through an Event Hubs. First set up an Event Grid subscription that pushes events into an Event Hubs using the Azure portal or CLI to use this sample. |
|[Create a thumbnail sprite (VTT) in JPG format](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_Sprite_Thumbnail/index.ts)| Shows how to generate a VTT Sprite Thumbnail in JPG format and how to set the columns and number of images. This also shows a speed encoding mode in H264 for a 720P layer. |
|[Content aware encoding with H264](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_H264_ContentAware/index.ts)| Example of using the standard encoder with Content Aware encoding to automatically generate the best quality adaptive bitrate streaming set based on an analysis of the source files contents|
|[Content aware encoding constrained with H264](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_H264_ContentAware_Constrained/index.ts)| Demonstrates how to control the output settings of the Content Aware encoding preset to make the outputs more deterministic to your encoding needs and costs. This will still auto generate the best quality adaptive bitrate streaming set based on an analysis of the source files contents, but constrain the output to your desired ranges.|
|[Use an overlay image](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_H264_OverlayImage/index.ts)| Shows how to upload an image file and overlay on top of video with output to MP4 container|
|[Rotate a video](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_H264_Rotate90degrees/index.ts)| Shows how to use the rotation filter to rotate a video by 90 degrees. |
|[Output to MPEG transport stream format](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_H264_To_TransportStream/index.ts)| Shows how to use the standard encoder to encode a source file and output to MPEG Transport Stream format using H264 format with AAC audio and PNG thumbnail|
|[Encode with HEVC](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_HEVC/index.ts)| Shows how to use the standard encoder to encode a source file into HEVC format with AAC audio and PNG thumbnails |
|[Content aware encoding with HEVC](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_HEVC_ContentAware/index.ts)| Example of using the standard encoder with Content Aware encoding to automatically generate the best quality HEVC (H.265) adaptive bitrate streaming set based on an analysis of the source files contents|
|[Content aware encoding constrained with HEVC](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_HEVC_ContentAware_Constrained/index.ts)| Demonstrates how to control the output settings of the Content Aware encoding preset to make the outputs more deterministic to your encoding needs and costs. This will still auto generate the best quality adaptive bitrate streaming set based on an analysis of the source files contents, but constrain the output to your desired ranges.|
|[Bulk encoding from a remote Azure storage account using SAS URLs](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_Bulk_Remote_Storage_Account_SAS/index.ts)| This samples shows how you can point to a remote Azure Storage account using a SAS URL and submit batches of encoding jobs to your account, monitor progress, and continue.  You can modify the file extension types to scan for (e.g - .mp4, .mov) and control the batch size submitted.  You can also modify the Transform used in the batch operation. This sample demonstrates the use of SAS URL's as ingest sources to a Job input. Make sure to configure the REMOTESTORAGEACCOUNTSAS environment variable in the .env file for this sample to work.|
| [Copy live archive to MP4 file format for export or use with Video Indexer](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_Live_Archive_To_MP4/) | This sample demonstrates how to use the archived output from a live event and extract only the top highest bitrate video track to be packaged into an MP4 file for export to social media platforms, or for use with Video Indexer.  The key concept in this sample is the use of an input definition on the Job InputAsset to specify a VideoTrackDescriptor. The SelectVideoTrackByAttribute allows you to select a single track from the live archive by using the bitrate attribute, and filtering by the "Top" video bitrate track in the live archive.|
| [Encode a multi-channel audio source file](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_MultiChannel_Audio/) | This sample demonstrates how to create an encoding Transform that uses channel mappings and audio track selection from the input source to output two new AAC audio tracks. The standard encoder is limited to outputting 1 Stereo track, followed by a 5.1 surround sound audio track in AAC format.|
| [Stitch and edit two assets together](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/VideoEncoding/Encoding_Stitch_Two_Assets/) | This sample demonstrates how to stitch and edit together two or more assets into a single MP4 file using the JobInputSequence as part of a job submission.|
| **Analytics** ||
| [Basic Audio Analytics with per-job language override](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/AudioAnalytics/index.ts)|This sample illustrates how to create a audio analyzer transform using the basic mode.  It also shows how you can override the preset language on a per-job basis to avoid creating a transform for every language.  It also shows how to upload a media file to an input asset, submit a job with the transform and download the results for verification.|
| **Player** ||
| [Shaka player with Timed Metadata for live event interactivity](https://github.com/Azure-Samples/media-services-v3-node-tutorials/blob/main/Player/examples/shaka)| This sample shows how to use the Google Shaka player with Low latency HLS streams to receive timed metadata events and display interactive information overlayed on the video element. This can be used to build interactive ads, quiz shows, polling, and other solutions that require events to be triggered in your web page or application during a live stream.|

## [Python](#tab/python/)

| Sample | Description |
|-------------|-------------|
| **Account** ||
| [Create an account](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Account/create-account.py) |The sample shows how to create a Media Services account and set the primary storage account, in addition to advanced configuration settings including Key Delivery IP allowlist, Managed Identity, storage auth, and bring your own encryption key.|
|[Create an account with a user managed identity](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Account/create-account-with-managed-identity.py)|The sample shows how to create a Media Services account and set the primary storage account, in addition to advanced configuration settings including Key Delivery IP allowlist, user or system assigned Managed Identity, storage auth, and bring your own encryption key.|
| **Asset** ||
| [List assets](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Assets/list-assets-filtered.py) | Basic example of how to connect and list assets |
| [Get container from asset](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Assets/get-container-from-asset.py) | Get the container name from the asset. |
| [List the tracks in an asset](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Assets/list-tracks-in-asset.py) | List the media tracks in an asset. |
| **Streaming** ||
|[Stream HLS and DASH](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Streaming/StreamFilesSample/stream-files-sample.py)| Basic example for uploading a local file or encoding from a source URL. Sample shows how to use storage SDK to download content, and shows how to stream to a player |
|[Use asset filters](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Streaming/AssetFilters/asset-filters.py)| Use a filter to stream assets.|
|[Live stream with standard passthrough](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Live/Standard_Passthrough_Live_Event/standard_passthrough_live_event.py)| Standard passthrough live streaming example. |
|[Live stream with standard passthrough with Event Hubs](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Live/Standard_Passthrough_Live_Event_Event_Hub/standard_passthrough_live_event_with_eventhub.py)| Demonstrates how to use Event Hubs to subscribe to events on the live streaming channel. Events include encoder connections, disconnections, heartbeat, latency, discontinuity, and drift issues. |
|[Live stream with basic passthrough](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Live/Basic_Passthrough_Live_Event/basic_passthrough_live_event.py)| Shows how to set up the basic passthrough live event if you only need to broadcast a low-cost UGC channel. |
|[Live stream with 720P standard encoding](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Live/720p_Encoding_Live_Event/720p_encoding_live_event.py)| Use live encoding in the cloud with the 720P HD adaptive bitrate encoding preset. |
|[Live stream with 720P standard encoding with Low Latency](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Live/720p_Encoding_Live_Event_Low_Latency/720p_low_latency_encoding_live_event.py)| Use live encoding in the cloud with the 720P HD adaptive bitrate encoding preset. |
|[Live stream with 1080P encoding](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Live/1080p_Encoding_Live_Event/1080p_encoding_live_event.py)| Use live encoding in the cloud with the 1080P HD adaptive bitrate encoding preset. |
| **Content protection** ||
|[Upload and stream HLS and DASH with PlayReady and Widevine DRM](https://github.com/Azure-Samples/media-services-v3-python/blob/main/Streaming/StreamFilesWithDRM/stream-files-with-drm-sample.py)| Demonstrates how to encode and stream using Widevine and PlayReady DRM |
|[Basic Playready DRM content protection and streaming](https://github.com/Azure-Samples/media-services-v3-python/blob/main/ContentProtection/BasicPlayReady/basic-play-ready.py)| Demonstrates how to encode and stream using PlayReady DRM |
|[Basic Widevine DRM content protection and streaming](https://github.com/Azure-Samples/media-services-v3-python/blob/main/ContentProtection/BasicWidevine/basic-widevine.py)| Demonstrates how to encode and stream using Widevine DRM |
| **Encoding** | |
| [Basic encoding](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/BasicEncoding/basic-encoding.py) | Basic example for uploading a local file or encoding from a source URL. Sample shows how to use storage SDK to download content, and shows how to stream to a player |
| [Create transform, use job preset overrides (v2-to-v3 API migration)](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/CreateTransform_Job_PresetOverride/) |If you need a workflow where you desire to submit custom preset jobs to a single queue, you can use this base sample that shows how to create a (mostly) empty Transform, and then you can use the preset override property on the Job to submit custom presets to the same transform. This allows you to treat the v3 AMS API a lot more like the legacy v2 API Job queue if you desire. |
| [Encode audio only with AAC](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_AAC_AudioOnly/) |This example shows you how to encoding only the audio of a media file.|
| [Encode with CopyCodec](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_BuiltIn_CopyCodec/) |This sample shows how to use the built-in Copy codec preset that can take a source video file that is already encoded using H264 and AAC audio, and copy it into MP4 tracks that are ready to be streamed by the AMS service.|
| [Encode with CopyCodec and proxy](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_BuiltIn_CopyCodecWithProxy/) |This sample shows how to use the built-in Copy codec preset that can take a source video file that is already encoded using H264 and AAC audio, and copy it into MP4 tracks that are ready to be streamed by the AMS service.|
| [Encode with a custom CopyCodec with a sprite and proxy](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_Custom_CopyCodec_Sprite%2BProxy/) |This sample shows how to use the built-in Copy codec preset that can take a source video file that is already encoded using H264 and AAC audio, and copy it into MP4 tracks that are ready to be streamed by the AMS service. In addition, this preset generates a fast proxy MP4 from the source video. |
| [Encoding with H264 and Event Hub/Event Grid](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_H264%20_with_EventHub/) |Shows how to use the standard encoder and receive and process Event Grid events from Media Services through an Event Hubs. First set up an Event Grid subscription that pushes events into an Event Hubs using the Azure portal or CLI to use this sample.|
| [Encode with H264](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_H264/) |Shows how to use the standard encoder to encode a source file into H264 format with AAC audio and PNG thumbnails|
| [Content Aware encoding with H264](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_H264_ContentAware/) |Example of using the standard encoder with Content Aware encoding to automatically generate the best quality adaptive bitrate streaming set based on an analysis of the source files contents|
| [Content Aware encoding constrained with H264](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/) |Demonstrates how to control the output settings of the Content Aware encoding preset to make the outputs more deterministic to your encoding needs and costs. This will still auto generate the best quality adaptive bitrate streaming set based on an analysis of the source files contents, but constrain the output to your desired ranges. |
| [Use an overlay image](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_H264_OverlayImage/) |Shows how to upload an image file and overlay on top of video with output to MP4 container. |
| [Rotate a video 90 degrees](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_H264_Rotate90degrees/) |Shows how to use the rotation filter to rotate a video by 90 degrees. |
| [Encode to a transport stream](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_H264_To_TransportStream/) |Shows how to use the standard encoder to encode a source file and output to MPEG Transport Stream format using H264 format with AAC audio and PNG thumbnail |
| [Encode HEVC](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_HEVC/) |Shows how to use the standard encoder to encode a source file into HEVC format with AAC audio and PNG thumbnails |
| [Content aware encoding with HEVC](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_HEVC_ContentAware/) |Example of using the standard encoder with Content Aware encoding to automatically generate the best quality HEVC (H.265) adaptive bitrate streaming set based on an analysis of the source files contents |
| [Content aware encoding constrained with HEVC](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/) | Demonstrates how to control the output settings of the Content Aware encoding preset to make the outputs more deterministic to your encoding needs and costs. This will still auto generate the best quality adaptive bitrate streaming set based on an analysis of the source files contents, but constrain the output to your desired ranges. |
| [Encode with multi-channel audio](https://github.com/Azure-Samples/media-services-v3-python/tree/main/VideoEncoding/Encoding_MultiChannel_Audio/) | This example shows you how to encode using multiple audio channels. |
| [Use a thumbnail sprite](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_Sprite_Thumbnail/) | This example shows you how to use a thumbnail sprite. |
| [Stitch two assets](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_Stitch_Two_Assets/) | This example shows you how to stitch two assets together.|
| [Crop a video](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/Encoding_Crop_Video/)|This sample illustrates how to crop a video.|
| [Copy live archive to MP4 file format for export or use with Video Indexer](https://github.com/Azure-Samples/media-services-v3-python/blob/main/VideoEncoding/EncodingLiveArchiveMP4/)| This sample shows you how to encode a live stream archive to MP4 for video on demand playbackThis sample demonstrates how to use the archived output from a live event and extract only the top highest bitrate video track to be packaged into an MP4 file for export to social media platforms, or for use with Video Indexer.  The key concept in this sample is the use of an input definition on the Job InputAsset to specify a VideoTrackDescriptor. The SelectVideoTrackByAttribute allows you to select a single track from the live archive by using the bitrate attribute, and filtering by the "Top" video bitrate track in the live archive.|
| **Analytics** | |
| [Audio analytics](https://github.com/Azure-Samples/media-services-v3-python/blob/main/AudioAnalytics/audio-analytics.py)|This sample illustrates how to create a audio analyzer transform using the basic mode. It also shows how you can override the preset language on a per-job basis to avoid creating a transform for every language. It also shows how to upload a media file to an input asset, submit a job with the transform and download the results for verification.|

## [.NET](#tab/net/)

| Sample | Description |
|-------------|-------------|
| [Account/CreateAccount](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/Account/CreateAccount)|The sample shows how to create a Media Services account and set the primary storage account, in addition to advanced configuration settings including Key Delivery IP allowlist, Managed Identity, storage auth, and bring your own encryption key.|
| [VideoEncoding/Encoding_PredefinedPreset](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/Encoding_PredefinedPreset)|The sample shows how to submit a job using a built-in preset and an HTTP URL input, publish output asset for streaming, and download results for verification.|
| [VideoEncoding/Encoding_H264_ContentAware](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/Encoding_H264_ContentAware) | Demonstrates the most basic use of H.264 content-aware encoding without any constraints |
| [VideoEncoding/Encoding_H264_ContentAware_Constrained](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/Encoding_H264_ContentAware_Constrained) | Demonstrates how to use the PresetConfigurations class to constrain the output behavior of the preset|
| [VideoEncoding/Encoding_H264](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/Encoding_H264)|The sample shows how to submit a job using a custom H.264 encoding preset and an HTTP URL input, publish output asset for streaming, and download results for verification.|
| [VideoEncoding/Encoding_HEVC_ContentAware](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/Encoding_HEVC_ContentAware) | Shows basic usage of the HEVC codec with content-aware encoding and no constraints.  The PresetConfigurations class is also supported for HEVC and can be added to this sample|
| [VideoEncoding/Encoding_HEVC](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/Encoding_HEVC)|The sample shows how to submit a job using a custom HEVC encoding preset and an HTTP URL input, publish output asset for streaming, and download results for verification.|
| [VideoEncoding/Encoding_StitchTwoAssets](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/Encoding_StitchTwoAssets)|The sample shows how to submit a job using the JobInputSequence to stitch together two or more assets that may be clipped by start or end time. The resulting encoded file is a single video with all assets stitched together.  The sample will also  publish output asset for streaming and download results for verification.|
| [VideoEncoding/Encoding_SpriteThumbnail](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/Encoding_SpriteThumbnail)|The sample shows how to submit a job using a custom preset with a thumbnail sprite and an HTTP URL input, publish output asset for streaming, and download results for verification.|
| [Live/LiveEventWithDVR](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/Live/LiveEventWithDVR)|This sample first shows how to create a LiveEvent with a full archive up to 25 hours and a filter on the asset with 5-minutes DVR window, then it shows how to use the filter to create a locator for streaming.|
| [AudioAnalytics/AudioAnalyzer](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/AudioAnalytics/AudioAnalyzer)|This sample illustrates how to create an audio analyzer transform, upload a media file to an input asset, submit a job with the transform, and download the results for verification.|
| [ContentProtection/BasicAESClearKey](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/ContentProtection/BasicAESClearKey)|This sample demonstrates how to create a transform with built-in AdaptiveStreaming preset, submit a job, create a ContentKeyPolicy using a secret key, associate the ContentKeyPolicy with StreamingLocator, get a token, and print a url for playback in Azure Media Player. When a stream is requested by a player, Media Services uses the specified key to dynamically encrypt your content with AES-128 and Azure Media Player uses the token to decrypt.|
| [ContentProtection/BasicWidevine](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/ContentProtection/BasicWidevine)|This sample demonstrates how to create a transform with built-in AdaptiveStreaming preset, submit a job, create a ContentKeyPolicy with Widevine configuration using a secret key, associate the ContentKeyPolicy with StreamingLocator, get a token, and print a url for playback in a Widevine Player. When a user requests Widevine-protected content, the player application requests a license from the Media Services license service. If the player application is authorized, the Media Services license service issues a license to the player. A Widevine license contains the decryption key that can be used by the client player to decrypt and stream the content.|
| [ContentProtection/BasicPlayReady](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/ContentProtection/BasicPlayReady)|This sample demonstrates how to create a transform with built-in AdaptiveStreaming preset, submit a job, create a ContentKeyPolicy with PlayReady configuration using a secret key, associate the ContentKeyPolicy with StreamingLocator, get a token, and print a url for playback in an Azure Media Player. When a user requests PlayReady-protected content, the player application requests a license from the Media Services license service. If the player application is authorized, the Media Services license service issues a license to the player. A PlayReady license contains the decryption key that can be used by the client player to decrypt and stream the content.|
| [ContentProtection/OfflinePlayReadyAndWidevine](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/ContentProtection/OfflinePlayReadyAndWidevine)|This sample demonstrates how to dynamically encrypt your content with PlayReady and Widevine DRM and play the content without requesting a license from license service. It shows how to create a transform with built-in AdaptiveStreaming preset, submit a job, create a ContentKeyPolicy with open restriction and PlayReady/Widevine persistent configuration, associate the ContentKeyPolicy with a StreamingLocator and print a url for playback.|
| [Streaming/AssetFilters](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/Streaming/AssetFilters)|This sample demonstrates how to create a transform with built-in AdaptiveStreaming preset, submit a job, create an asset-filter and an account-filter, associate the filters to streaming locators and print urls for playback.|
| [Streaming/StreamHLSAndDASH](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/Streaming/StreamHLSAndDASH)|This sample demonstrates how to create a transform with built-in AdaptiveStreaming preset, submit a job, publish output asset for HLS and DASH streaming.|
| [HighAvailabilityEncodingStreaming](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/HighAvailabilityEncodingStreaming/) | This sample provides guidance and best practices for a production system using on-demand encoding or analytics. Readers should start with the companion article [High Availability with Media Services and VOD](architecture-high-availability-encoding-concept.md). There is a separate solution file provided for the [HighAvailabilityEncodingStreaming](https://github.com/Azure-Samples/media-services-v3-dotnet/blob/main/HighAvailabilityEncodingStreaming/README.md) sample. |
| [Azure Functions for Media Services](https://github.com/xpouyat/media-services-v3-dotnet-core-functions-integration/tree/main/Functions)|This project contains examples of Azure Functions that connect to Azure Media Services v3 for video processing. You can use Visual Studio 2019 or Visual Studio Code to develop and run the functions. An Azure Resource Manager (ARM) template and a GitHub Actions workflow are provided for the deployment of the Function resources and to enable continuous deployment.|

## [Java](#tab/java)

|Sample|Description|
|---|---|
|[AudioAnalytics/AudioAnalyzer/](https://github.com/Azure-Samples/media-services-v3-java/tree/master/AudioAnalytics/AudioAnalyzer)|How to analyze audio in a media file. |
|Content Protection|
|ContentProtection||
|[BasicAESClearKey](https://github.com/Azure-Samples/media-services-v3-java/tree/master/ContentProtection/BasicAESClearKey)|How to dynamically encrypt your content with AES-128.|
|[BasicPlayReady](https://github.com/Azure-Samples/media-services-v3-java/tree/master/ContentProtection/BasicPlayReady)|How to dynamically encrypt your content with PlayReady DRM.|
|[BasicWidevine](https://github.com/Azure-Samples/media-services-v3-java/tree/master/ContentProtection/BasicWidevine)|How to dynamically encrypt your content with Widevine DRM.|
|[OfflineFairPlay](https://github.com/Azure-Samples/media-services-v3-java/tree/master/ContentProtection/OfflineFairPlay)|How to dynamically encrypt your content with FairPlay DRM and play the content without requesting a license from license service.|
|[OfflinePlayReadyAndWidevine](https://github.com/Azure-Samples/media-services-v3-java/tree/master/ContentProtection/OfflinePlayReadyAndWidevine)|How to dynamically encrypt your content with PlayReady and Widevine DRM and play the content without requesting a license from license service.|
|DynamicPackagingVODContent||
|[AssetFilters](https://github.com/Azure-Samples/media-services-v3-java/tree/master/DynamicPackagingVODContent/AssetFilters)|How to filter content using asset and account filters.|
|[StreamHLSAndDASH](https://github.com/Azure-Samples/media-services-v3-java/tree/master/DynamicPackagingVODContent/StreamHLSAndDASH)|How to dynamically package VOD content into HLS/DASH for streaming.|
|[LiveIngest/LiveEventWithDVR](https://github.com/Azure-Samples/media-services-v3-java/tree/master/LiveIngest/LiveEventWithDVR)|How to create a Live Event with a full archive up to 25 hours and a filter on the asset with 5-minutes DVR window and how to create a locator for streaming and use the filter.|
|VideoEncoding||
|[EncodingWithMESCustomPreset](https://github.com/Azure-Samples/media-services-v3-java/tree/master/VideoEncoding/EncodingWithMESCustomPreset)|How to create a custom encoding Transform using the StandardEncoderPreset settings.|
|[EncodingWithMESPredefinedPreset](https://github.com/Azure-Samples/media-services-v3-java/tree/master/VideoEncoding/EncodingWithMESPredefinedPreset)|How to submit a job using a built-in preset and an HTTP URL input, publish output asset for streaming, and download results for verification.|

---

[!INCLUDE [warning-rest-api-retry-policy.md](./includes/warning-rest-api-retry-policy.md)]

[!INCLUDE [media-services-community](includes/media-services-community.md)]
